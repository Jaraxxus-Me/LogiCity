source /opt/conda/etc/profile.d/conda.sh
conda activate base

checkpoints=(
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.01_1/transfer_modular_nlm_fixed_0.01_1_epoch15_valacc0.2662.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.01_1/transfer_modular_nlm_fixed_0.01_1_epoch26_valacc0.2177.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.01_1/transfer_modular_nlm_fixed_0.01_1_epoch20_valacc0.2031.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.2_0/transfer_modular_nlm_fixed_0.2_0_epoch1_valacc0.2599.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.2_0/transfer_modular_nlm_fixed_0.2_0_epoch27_valacc0.2105.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.2_0/transfer_modular_nlm_fixed_0.2_0_epoch24_valacc0.2072.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.1_2/transfer_modular_nlm_fixed_0.1_2_epoch13_valacc0.2507.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.1_2/transfer_modular_nlm_fixed_0.1_2_epoch9_valacc0.2244.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.1_2/transfer_modular_nlm_fixed_0.1_2_epoch21_valacc0.2144.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.01_0/transfer_modular_nlm_fixed_0.01_0_epoch27_valacc0.2103.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.01_0/transfer_modular_nlm_fixed_0.01_0_epoch22_valacc0.1916.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.01_0/transfer_modular_nlm_fixed_0.01_0_epoch28_valacc0.1901.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_1.0_2/transfer_modular_nlm_fixed_1.0_2_epoch25_valacc0.2650.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_1.0_2/transfer_modular_nlm_fixed_1.0_2_epoch18_valacc0.2400.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_1.0_2/transfer_modular_nlm_fixed_1.0_2_epoch20_valacc0.2393.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.05_0/transfer_modular_nlm_fixed_0.05_0_epoch11_valacc0.2491.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.05_0/transfer_modular_nlm_fixed_0.05_0_epoch7_valacc0.2345.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.05_0/transfer_modular_nlm_fixed_0.05_0_epoch6_valacc0.2341.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.5_0/transfer_modular_nlm_fixed_0.5_0_epoch28_valacc0.2600.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.5_0/transfer_modular_nlm_fixed_0.5_0_epoch27_valacc0.2515.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.5_0/transfer_modular_nlm_fixed_0.5_0_epoch29_valacc0.2492.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.2_2/transfer_modular_nlm_fixed_0.2_2_epoch27_valacc0.2855.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.2_2/transfer_modular_nlm_fixed_0.2_2_epoch8_valacc0.2263.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.2_2/transfer_modular_nlm_fixed_0.2_2_epoch28_valacc0.2196.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.8_2/transfer_modular_nlm_fixed_0.8_2_epoch17_valacc0.2510.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.8_2/transfer_modular_nlm_fixed_0.8_2_epoch29_valacc0.2478.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.8_2/transfer_modular_nlm_fixed_0.8_2_epoch23_valacc0.2437.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.2_1/transfer_modular_nlm_fixed_0.2_1_epoch11_valacc0.2224.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.2_1/transfer_modular_nlm_fixed_0.2_1_epoch29_valacc0.2174.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.2_1/transfer_modular_nlm_fixed_0.2_1_epoch27_valacc0.2063.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.5_2/transfer_modular_nlm_fixed_0.5_2_epoch23_valacc0.2450.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.5_2/transfer_modular_nlm_fixed_0.5_2_epoch24_valacc0.2448.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.5_2/transfer_modular_nlm_fixed_0.5_2_epoch25_valacc0.2436.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_1.0_1/transfer_modular_nlm_fixed_1.0_1_epoch29_valacc0.2766.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_1.0_1/transfer_modular_nlm_fixed_1.0_1_epoch27_valacc0.2694.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_1.0_1/transfer_modular_nlm_fixed_1.0_1_epoch23_valacc0.2597.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.1_0/transfer_modular_nlm_fixed_0.1_0_epoch6_valacc0.2349.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.1_0/transfer_modular_nlm_fixed_0.1_0_epoch29_valacc0.2078.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.1_0/transfer_modular_nlm_fixed_0.1_0_epoch28_valacc0.2057.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.05_1/transfer_modular_nlm_fixed_0.05_1_epoch7_valacc0.2528.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.05_1/transfer_modular_nlm_fixed_0.05_1_epoch20_valacc0.2276.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.05_1/transfer_modular_nlm_fixed_0.05_1_epoch14_valacc0.1951.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.5_1/transfer_modular_nlm_fixed_0.5_1_epoch23_valacc0.2495.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.5_1/transfer_modular_nlm_fixed_0.5_1_epoch27_valacc0.2475.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.5_1/transfer_modular_nlm_fixed_0.5_1_epoch26_valacc0.2423.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.8_1/transfer_modular_nlm_fixed_0.8_1_epoch21_valacc0.2524.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.8_1/transfer_modular_nlm_fixed_0.8_1_epoch19_valacc0.2517.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.8_1/transfer_modular_nlm_fixed_0.8_1_epoch29_valacc0.2464.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.01_2/transfer_modular_nlm_fixed_0.01_2_epoch25_valacc0.2030.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.01_2/transfer_modular_nlm_fixed_0.01_2_epoch17_valacc0.1640.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.01_2/transfer_modular_nlm_fixed_0.01_2_epoch16_valacc0.1637.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.1_1/transfer_modular_nlm_fixed_0.1_1_epoch4_valacc0.1983.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.1_1/transfer_modular_nlm_fixed_0.1_1_epoch29_valacc0.1938.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.1_1/transfer_modular_nlm_fixed_0.1_1_epoch19_valacc0.1928.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.05_2/transfer_modular_nlm_fixed_0.05_2_epoch28_valacc0.1899.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.05_2/transfer_modular_nlm_fixed_0.05_2_epoch26_valacc0.1885.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.05_2/transfer_modular_nlm_fixed_0.05_2_epoch24_valacc0.1837.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_1.0_0/transfer_modular_nlm_fixed_1.0_0_epoch16_valacc0.2689.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_1.0_0/transfer_modular_nlm_fixed_1.0_0_epoch22_valacc0.2675.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_1.0_0/transfer_modular_nlm_fixed_1.0_0_epoch29_valacc0.2609.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.8_0/transfer_modular_nlm_fixed_0.8_0_epoch23_valacc0.2619.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.8_0/transfer_modular_nlm_fixed_0.8_0_epoch18_valacc0.2550.pth"
    "vis_input_weights/hard/transfer_modular_nlm_fixed_0.8_0/transfer_modular_nlm_fixed_0.8_0_epoch25_valacc0.2428.pth"
)
    # Loop over each checkpoint file
    for ckpt in "${checkpoints[@]}"
    do
        exp_name=$(basename "$ckpt" | cut -d'_' -f1-9)  # This extracts the part of the filename without extension
        python3 tools/test_vis_input_mod.py             --config config/tasks/Vis/ResNetNLM/hard_200_fixed_modular.yaml             --ckpt "$ckpt"             --exp "$exp_name"             >> "log_vis/${exp_name}_transfer_test.log"
    done
    