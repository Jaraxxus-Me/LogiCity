source /opt/conda/etc/profile.d/conda.sh
conda activate base

checkpoints=(
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.5_0/transfer_e2e_nlm_random_0.5_0_epoch23_valacc0.4407.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.5_0/transfer_e2e_nlm_random_0.5_0_epoch21_valacc0.4038.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.5_0/transfer_e2e_nlm_random_0.5_0_epoch25_valacc0.3934.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.01_0/transfer_e2e_nlm_random_0.01_0_epoch29_valacc0.2009.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.01_0/transfer_e2e_nlm_random_0.01_0_epoch28_valacc0.1898.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.01_0/transfer_e2e_nlm_random_0.01_0_epoch0_valacc0.1667.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.8_2/transfer_e2e_nlm_random_0.8_2_epoch20_valacc0.3996.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.8_2/transfer_e2e_nlm_random_0.8_2_epoch24_valacc0.3918.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.8_2/transfer_e2e_nlm_random_0.8_2_epoch18_valacc0.3798.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.8_0/transfer_e2e_nlm_random_0.8_0_epoch29_valacc0.4023.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.8_0/transfer_e2e_nlm_random_0.8_0_epoch19_valacc0.3887.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.8_0/transfer_e2e_nlm_random_0.8_0_epoch24_valacc0.3829.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_1.0_2/transfer_e2e_nlm_random_1.0_2_epoch15_valacc0.3889.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_1.0_2/transfer_e2e_nlm_random_1.0_2_epoch17_valacc0.3807.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_1.0_2/transfer_e2e_nlm_random_1.0_2_epoch19_valacc0.3789.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.01_1/transfer_e2e_nlm_random_0.01_1_epoch23_valacc0.2750.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.01_1/transfer_e2e_nlm_random_0.01_1_epoch27_valacc0.2750.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.01_1/transfer_e2e_nlm_random_0.01_1_epoch25_valacc0.2748.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.2_2/transfer_e2e_nlm_random_0.2_2_epoch24_valacc0.3908.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.2_2/transfer_e2e_nlm_random_0.2_2_epoch28_valacc0.3686.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.2_2/transfer_e2e_nlm_random_0.2_2_epoch27_valacc0.3422.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_1.0_1/transfer_e2e_nlm_random_1.0_1_epoch5_valacc0.4636.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_1.0_1/transfer_e2e_nlm_random_1.0_1_epoch27_valacc0.3953.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_1.0_1/transfer_e2e_nlm_random_1.0_1_epoch24_valacc0.3896.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.5_2/transfer_e2e_nlm_random_0.5_2_epoch22_valacc0.3789.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.5_2/transfer_e2e_nlm_random_0.5_2_epoch28_valacc0.3759.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.5_2/transfer_e2e_nlm_random_0.5_2_epoch13_valacc0.3642.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.05_0/transfer_e2e_nlm_random_0.05_0_epoch14_valacc0.2751.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.05_0/transfer_e2e_nlm_random_0.05_0_epoch11_valacc0.2710.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.05_0/transfer_e2e_nlm_random_0.05_0_epoch22_valacc0.2673.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.8_1/transfer_e2e_nlm_random_0.8_1_epoch20_valacc0.4318.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.8_1/transfer_e2e_nlm_random_0.8_1_epoch25_valacc0.4007.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.8_1/transfer_e2e_nlm_random_0.8_1_epoch21_valacc0.3857.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_1.0_0/transfer_e2e_nlm_random_1.0_0_epoch26_valacc0.3939.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_1.0_0/transfer_e2e_nlm_random_1.0_0_epoch10_valacc0.3744.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_1.0_0/transfer_e2e_nlm_random_1.0_0_epoch14_valacc0.3735.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.05_1/transfer_e2e_nlm_random_0.05_1_epoch7_valacc0.2754.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.05_1/transfer_e2e_nlm_random_0.05_1_epoch6_valacc0.2754.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.05_1/transfer_e2e_nlm_random_0.05_1_epoch5_valacc0.2754.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.1_1/transfer_e2e_nlm_random_0.1_1_epoch4_valacc0.2753.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.1_1/transfer_e2e_nlm_random_0.1_1_epoch15_valacc0.2752.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.1_1/transfer_e2e_nlm_random_0.1_1_epoch20_valacc0.2752.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.5_1/transfer_e2e_nlm_random_0.5_1_epoch28_valacc0.3935.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.5_1/transfer_e2e_nlm_random_0.5_1_epoch29_valacc0.3731.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.5_1/transfer_e2e_nlm_random_0.5_1_epoch18_valacc0.3651.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.01_2/transfer_e2e_nlm_random_0.01_2_epoch11_valacc0.2748.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.01_2/transfer_e2e_nlm_random_0.01_2_epoch10_valacc0.2656.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.01_2/transfer_e2e_nlm_random_0.01_2_epoch9_valacc0.2621.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.2_0/transfer_e2e_nlm_random_0.2_0_epoch17_valacc0.3406.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.2_0/transfer_e2e_nlm_random_0.2_0_epoch22_valacc0.3387.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.2_0/transfer_e2e_nlm_random_0.2_0_epoch13_valacc0.3379.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.2_1/transfer_e2e_nlm_random_0.2_1_epoch19_valacc0.3235.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.2_1/transfer_e2e_nlm_random_0.2_1_epoch18_valacc0.3218.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.2_1/transfer_e2e_nlm_random_0.2_1_epoch28_valacc0.3211.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.1_0/transfer_e2e_nlm_random_0.1_0_epoch25_valacc0.3429.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.1_0/transfer_e2e_nlm_random_0.1_0_epoch28_valacc0.3128.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.1_0/transfer_e2e_nlm_random_0.1_0_epoch26_valacc0.3111.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.05_2/transfer_e2e_nlm_random_0.05_2_epoch21_valacc0.2961.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.05_2/transfer_e2e_nlm_random_0.05_2_epoch26_valacc0.2804.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.05_2/transfer_e2e_nlm_random_0.05_2_epoch24_valacc0.2785.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.1_2/transfer_e2e_nlm_random_0.1_2_epoch29_valacc0.3328.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.1_2/transfer_e2e_nlm_random_0.1_2_epoch25_valacc0.2900.pth"
    "vis_input_weights/hard/transfer_e2e_nlm_random_0.1_2/transfer_e2e_nlm_random_0.1_2_epoch22_valacc0.2897.pth"
)
    # Loop over each checkpoint file
    for ckpt in "${checkpoints[@]}"
    do
        exp_name=$(basename "$ckpt" | cut -d'_' -f1-9)  # This extracts the part of the filename without extension
        python3 tools/test_vis_input_e2e.py             --config config/tasks/Vis/ResNetNLM/hard_200_fixed_e2e.yaml             --ckpt "$ckpt"             --exp "$exp_name"             >> "log_vis/${exp_name}_transfer_test.log"
    done
    